{"version":3,"sources":["forms/CommandList.js","forms/CommandItem.js","structure.js","AppClient.js","index.js","translations.js"],"names":["CommandsList","sys","reload","a","app","Commands","loadCommands","force","response","content","list","value","openCommand","row","index","open","id","elements","type","Elements","TABLE","rowClick","columns","title","dataPath","actions","BUTTON","onClick","load","this","getCommands","Form","Command","args","exec","execCommand","commandIndex","error","input","close","params","LABEL","tag","INPUT","rows","rowsMax","style","fontFamily","loadCommand","getCommand","label","Array","isArray","command","join","form","structures","AppClient","parent","baseUrl","env","apiUrl","init","forms","CommandsItem","menu","unshift","makeApiLinks","entities","find","item","rule","entity","method","saveAuth","use","AppUser","package","KateJSClient","translations","undefined"],"mappings":"2TAGqBA,E,kDAGnB,WAAYC,GAAM,IAAD,8BACf,cAAMA,IA8BRC,OA/BiB,sBA+BR,8BAAAC,EAAA,sEACoB,EAAKC,IAAIC,SAASC,aAAa,CAAEC,OAAO,IAD5D,iBACCC,EADD,EACCA,YAEN,EAAKC,QAAQC,KAAKC,MAAQH,GAHrB,2CA/BQ,EAsCjBI,YAAc,SAACC,EAAKC,GAClB,EAAKV,IAAIW,KAAK,eAAgB,CAAEC,GAAIF,KArCpC,EAAKG,SAAW,CACd,CACED,GAAI,OACJE,KAAMC,WAASC,MACfC,SAAU,EAAKT,YACfU,QAAS,CACP,CAAEC,MAAO,OAAQC,SAAU,UAE7Bb,MAAO,KAGX,EAAKc,QAAU,CACb,CACEP,KAAMC,WAASO,OACfC,QAAS,EAAKzB,OACdqB,MAAO,WAIX,EAAKK,OArBU,E,qLAyBYC,KAAKzB,IAAIC,SAASyB,c,iBAArCtB,E,EAAAA,YAENqB,KAAKpB,QAAQC,KAAKC,MAAQH,G,2GA9BUuB,QAArB/B,EACZuB,MAAQ,W,ICDIS,E,kDAGnB,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IA2CRC,KA5CkB,sBA4CX,gCAAA/B,EAAA,sEAC6B,EAAKC,IACpCC,SAAS8B,YAAY,CAAEC,aAAc,EAAKA,eAFxC,gBACG5B,EADH,EACGA,SAAU6B,EADb,EACaA,MAElB,EAAK5B,QAAQ6B,MAAM3B,MAAQH,GAAY6B,EAHlC,2CA5CW,EAkDlBE,MAAQ,WACN,EAAKnC,IAAIW,KAAK,iBAjDd,EAAKqB,aAAeH,EAAKO,OAAOxB,GAEhC,EAAKS,QAAU,CACb,CACEP,KAAMC,WAASO,OACfH,MAAO,OACPI,QAAS,EAAKO,MAEhB,CACEhB,KAAMC,WAASO,OACfH,MAAO,QACPI,QAAS,EAAKY,QAIlB,EAAKtB,SAAW,CACd,CACED,GAAI,QACJE,KAAMC,WAASsB,MACflB,MAAO,UACPmB,IAAK,MAEP,CACE1B,GAAI,QACJE,KAAMC,WAASwB,MACfC,KAAM,GACNC,QAAS,IACTC,MAAO,CAAEC,WAAY,wCAIzB,EAAKC,cAjCW,E,4LAqCWnB,KAAKzB,IAAIC,SAAS4C,WAAW,CAAEb,cAAeP,KAAKO,e,iBAAtE5B,E,EAAAA,YAENqB,KAAKpB,QAAQyC,MAAM3B,MAAQ4B,MAAMC,QAAQ5C,EAAS6C,SAAW7C,EAAS6C,QAAQC,KAAK,MAAQ9C,EAAS6C,QACpGxB,KAAKpB,QAAQ8C,KAAKhC,MAAlB,mBAAsCf,EAASe,Q,2GA3ChBQ,QAAhBC,EACZT,MAAQ,UCHV,IAEMiC,EAAa,G,SCMpBC,EAAY,SAAAC,GAAM,qEAGtB,WAAYlB,GAAS,IAAD,8BAClB,cAAMA,IACDmB,QAAUC,EAAIC,QAAU,OAE7B,EAAKC,KAAK,CAAEN,eACZ,EAAKO,MAAL,eACK,EAAKA,MADV,CAEE/D,eACAgE,iBAEF,EAAKC,KAAKC,QAAQ,CAChB3C,MAAO,WACPgC,KAAM,iBAER,EAAKY,aAAa,CAAEC,SAAU,CAAC,cAC/B,EAAKH,KAAKI,MAAK,SAAAC,GAAI,MAAkB,aAAdA,EAAKf,QAAqBgB,KAAO,CACtDC,OAAQ,OACRC,OAAQ,OAEV,EAAKR,KAAKI,MAAK,SAAAC,GAAI,MAAkB,aAAdA,EAAKf,QAAqBgB,KAAO,CACtDC,OAAQ,OACRC,OAAQ,OAGV,EAAKC,UAAW,EAxBE,EAHE,UAAyBC,cAAIjB,EAAQkB,YAArC,EACfrD,MDTY,YCQG,GA8BxBkC,EAAUoB,QDrCiB,YCsCZpB,QCnCfqB,IAAa,CAAErB,YAAWsB,kBCFRC,M","file":"static/js/main.f1dad42e.chunk.js","sourcesContent":["import { Form, Elements } from 'katejs/lib/client';\n// import { Form, Elements } from 'katejs/client'; // local\n\nexport default class CommandsList extends Form {\n  static title = 'Commands';\n\n  constructor(sys) {\n    super(sys);\n    this.elements = [\n      {\n        id: 'list',\n        type: Elements.TABLE,\n        rowClick: this.openCommand,\n        columns: [\n          { title: 'Name', dataPath: 'title' },\n        ],\n        value: [],\n      },\n    ];\n    this.actions = [\n      {\n        type: Elements.BUTTON,\n        onClick: this.reload,\n        title: 'Reload',\n      },\n    ];\n\n    this.load();\n  }\n\n  async load() {\n    const { response } = await this.app.Commands.getCommands();\n    if (response) {\n      this.content.list.value = response;\n    }\n  }\n\n  reload = async () => {\n    const { response } = await this.app.Commands.loadCommands({ force: true });\n    if (response) {\n      this.content.list.value = response;\n    }\n  }\n\n  openCommand = (row, index) => {\n    this.app.open('CommandsItem', { id: index });\n  }\n}\n","import { Form, Elements } from 'katejs/lib/client';\n// import { Form, Elements } from 'katejs/client'; // local\n\nexport default class Command extends Form {\n  static title = 'Command';\n\n  constructor(args) {\n    super(args);\n    this.commandIndex = args.params.id;\n\n    this.actions = [\n      {\n        type: Elements.BUTTON,\n        title: 'EXEC',\n        onClick: this.exec,\n      },\n      {\n        type: Elements.BUTTON,\n        title: 'CLOSE',\n        onClick: this.close,\n      },\n    ];\n\n    this.elements = [\n      {\n        id: 'label',\n        type: Elements.LABEL,\n        title: 'Command',\n        tag: 'h5',\n      },\n      {\n        id: 'input',\n        type: Elements.INPUT,\n        rows: 20,\n        rowsMax: 100,\n        style: { fontFamily: '\"Courier New\", Courier, monospace ' },\n      },\n    ];\n\n    this.loadCommand();\n  }\n\n  async loadCommand() {\n    const { response } = await this.app.Commands.getCommand({ commandIndex: +this.commandIndex });\n    if (response) {\n      this.content.label.title = Array.isArray(response.command) ? response.command.join('; ') : response.command;\n      this.content.form.title = `Command: ${response.title}`;\n    }\n  }\n\n  exec = async () => {\n    const { response, error } = await this.app\n      .Commands.execCommand({ commandIndex: this.commandIndex });\n    this.content.input.value = response || error;\n  };\n\n  close = () => {\n    this.app.open('CommandsList');\n  }\n}\n","\r\nexport const title = 'CommandEx';\r\nexport const packageName = 'commandex';\r\nexport const structures = {\r\n};\r\n","import { use } from 'katejs/lib/client';\nimport { AppUser } from 'katejs-modules/lib/client';\n\nimport CommandsList from './forms/CommandList';\nimport CommandsItem from './forms/CommandItem';\n\nimport { structures, title, packageName } from './structure';\nimport env from './front.env.json';\n\nconst AppClient = parent => class Client extends use(parent, AppUser) {\n  static title = title;\n\n  constructor(params) {\n    super(params);\n    this.baseUrl = env.apiUrl || '/api';\n\n    this.init({ structures });\n    this.forms = {\n      ...this.forms,\n      CommandsList,\n      CommandsItem,\n    };\n    this.menu.unshift({\n      title: 'Commands',\n      form: 'CommandsList',\n    });\n    this.makeApiLinks({ entities: ['Commands'] });\n    this.menu.find(item => item.form === 'UserList').rule = {\n      entity: 'User',\n      method: 'put',\n    };\n    this.menu.find(item => item.form === 'RoleList').rule = {\n      entity: 'Role',\n      method: 'put',\n    };\n\n    this.saveAuth = true;\n  }\n};\nAppClient.package = packageName;\nexport default AppClient;\n","import KateJSClient from 'katejs/lib/client';\r\n\r\nimport AppClient from './AppClient';\r\nimport translations from './translations';\r\n\r\nKateJSClient({ AppClient, translations });\r\n","// import { translations } from 'katejs/lib/client';\n\n/* eslint-disable quote-props */\nconst translate = undefined;\n// {\n//   languages: ['ru'],\n//   ru: {\n//     ...translations.ru,\n//     'Tasks': 'Задачи',\n//   },\n// };\n\nexport default translate;\n"],"sourceRoot":""}